!function(){var t={285:function(){window.addEventListener("load",(function(t){const e=Vue.createApp({data:()=>({from:{currency:"",currencyImage:"",currentAmount:0,minAmount:0,tabIndex:1,search:""},to:{currency:"",currencyImage:"",estimatedAmount:0,tabIndex:2,search:""},APIKEY:"c9155859d90d239f909d2906233816b26cd8cf5ede44702d422667672b58b0cd",availableCurrenciesList:[],error:{isError:!1,errorText:""},tabIndex:0}),computed:{availableCurrenciesListFrom(){return this.availableCurrenciesList.filter((t=>-1!==t.ticker.indexOf(this.from.search)))},availableCurrenciesListTo(){return this.availableCurrenciesList.filter((t=>-1!==t.ticker.indexOf(this.to.search)))},isDropdownFromActive(){return this.from.tabIndex===this.tabIndex},isDropdownToActive(){return this.to.tabIndex===this.tabIndex}},watch:{availableCurrenciesList(){this.from.currency=this.availableCurrenciesList[0].ticker,this.from.currencyImage=this.availableCurrenciesList[0].image,this.to.currency=this.availableCurrenciesList[1].ticker,this.to.currencyImage=this.availableCurrenciesList[1].image},"from.currency"(){this.getMinimalExchangeAmount()},"to.currency"(){this.getMinimalExchangeAmount()},"from.minAmount"(){this.from.currentAmount=this.from.minAmount},"from.currentAmount"(){this.getEstimatedExchangeAmount()}},methods:{async getAvailableCurrencies(){const t=await fetch("https://api.changenow.io/v1/currencies");if(t.ok){const e=await t.json();this.availableCurrenciesList=e}},async getMinimalExchangeAmount(){const t=`https://api.changenow.io/v1/min-amount/${this.from.currency}_${this.to.currency}?api_key=${this.APIKEY}`,e=await fetch(t);if(e.ok){const t=(await e.json()).minAmount;this.from.minAmount!==t?this.from.minAmount=t:(this.from.currentAmount=t,this.getEstimatedExchangeAmount()),this.removeError()}else this.doError("This pair is disabled now")},async getEstimatedExchangeAmount(){const t=this.from.currency,e=this.to.currency,r=this.from.currentAmount;if(r>=this.from.minAmount){const i=`https://api.changenow.io/v1/exchange-amount/${r}/${t}_${e}?api_key=${this.APIKEY}`,n=await fetch(i);if(n.ok){const t=(await n.json()).estimatedAmount;this.to.estimatedAmount=t,this.removeError()}else this.doError("This pair is disabled now")}else this.doError("The amount is invalid")},doError(t){this.error.isError=!0,this.error.errorText=t,this.to.estimatedAmount="-"},removeError(){this.error.isError=!1},currencyListClickHandler(t){const e=t.target;if(e.closest(".currency__dropdown-list-item")){const r=e.closest(".currency__dropdown-list-item"),i=t.currentTarget.dataset.direction;this[i].currency=r.dataset.ticker,this[i].currencyImage=r.dataset.image,this.tabIndex=0}},closeDropdown(t){t.target.closest(".currency")||(this.tabIndex=0)}},mounted(){this.getAvailableCurrencies()}});e.mount("#widget")}))}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,r),o.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";r(285)}()}();